docker run -p 5000:5000 \
  -e AWS_ACCESS_KEY_ID=... \
  -e AWS_SECRET_ACCESS_KEY=... \
  -e AWS_REGION=us-east-1 \
  smiski-backend:latest

aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 900546069136.dkr.ecr.us-east-1.amazonaws.com

USE ME:
docker buildx build --platform linux/arm64 -t smiski-backend:latest --load .
docker tag smiski-backend:latest 900546069136.dkr.ecr.us-east-1.amazonaws.com/smiski-backend:latest
docker push 900546069136.dkr.ecr.us-east-1.amazonaws.com/smiski-backend:latest



#!/bin/bash

# ===== CONFIGURATION =====
ALB_DNS="smiski-alb-1234567890.us-east-1.elb.amazonaws.com"  # <-- REPLACE with your ALB DNS
CONCURRENCY=50       # Number of concurrent users
DURATION="5m"        # Test duration
PLATFORM="linux_amd64"  # Change to "darwin_amd64" if Mac Intel, "darwin_arm64" if Mac M1/M2

# ===== INSTALL hey =====
echo "[INFO] Downloading hey load testing tool..."
curl -L -o hey.tgz https://github.com/rakyll/hey/releases/latest/download/hey_${PLATFORM}.tar.gz
tar -xzf hey.tgz
chmod +x hey
sudo mv hey /usr/local/bin/

# ===== VERIFY INSTALL =====
echo "[INFO] hey version:"
hey --version

# ===== RUN LOAD TEST =====
echo "[INFO] Running load test against $ALB_DNS for $DURATION at $CONCURRENCY concurrency..."
hey -z $DURATION -c $CONCURRENCY http://$ALB_DNS/

echo "[INFO] Load test finished. Check ECS tasks and CloudWatch metrics to confirm scaling."


